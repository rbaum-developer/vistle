#include "NodeMap.h"
namespace tecplot { namespace ___3931 { ___2722::___2722(___37* tecUtil, ___1170 zone, bool writable  ) : m_tecUtil(tecUtil) , ___2495(NULL) { REQUIRE(m_tecUtil->___894()); REQUIRE(zone > 0 && m_tecUtil->___4635(zone) && m_tecUtil->___4637(zone)); ___4262 datasetID = m_tecUtil->datasetGetUniqueID(); ___2495 = writable ? m_tecUtil->___867(zone) : m_tecUtil->___865(zone); bool ___2037 = ___2495 != NULL; if (___2037) { ___2682 = m_tecUtil->___4617(zone); m_numSections = 1; if (___2682 == ZoneType_FEMixed) ___2037 = m_tecUtil->zoneGetNumSections(datasetID, zone, &m_numSections); if (___2037) { m_rawNodeMapPtr32.resize(m_numSections); m_rawNodeMapPtr64.resize(m_numSections); ___2390.resize(m_numSections); m_cumulativeNumCells.resize(m_numSections); m_numNodesPerCell.resize(m_numSections); } } m_offsetDataType = m_tecUtil->dataNodeGetRawItemType(___2495); for (___1170 section = 0; ___2037 && section < m_numSections; ++section) { FECellShape_e cellShape = FECellShape_Invalid; ___1170 gridOrder = 0; FECellBasisFunction_e basisFn = FECellBasisFunction_Invalid; ___1170 numCornersPerElem = 0; ___2037 = m_tecUtil->zoneGetSectionMetrics( datasetID, zone, section+1, &cellShape, &gridOrder, &basisFn, &___2390[section], &numCornersPerElem, &m_numNodesPerCell[section]); if (___2037) { m_cumulativeNumCells[section] = ___2390[section] + (section == 0 ? 0 : m_cumulativeNumCells[section-1]); if (m_offsetDataType == OffsetDataType_32Bit) m_rawNodeMapPtr32[section] = m_tecUtil->dataNodeSectionGetRawPtrByRef(___2495, section+1); else m_rawNodeMapPtr64[section] = m_tecUtil->dataNodeSectionGetRawPtrByRef64(___2495, section+1); } } if (___2037) { ___1842 ___1841; m_tecUtil->___4612(zone, ___1841); } else { *this = ___2722(); } ENSURE(EQUIVALENCE(___2037, ___2065())); } }}
